var helper=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,r){"use strict";function n(){$(".sidebar").prepend("<div class='backspace'>\n            <div class='folderName'>Вернуться назад</div>\n        </div>")}function i(e,t){var r=document.getElementById(e).innerHTML;for(var n in t)if(t.hasOwnProperty(n)){var i=new RegExp("{"+n+"}","g");r=r.replace(i,t[n])}return r}function l(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}function a(e){$.getJSON(e,function(e){c=new o($.parseJSON(e.child_folders),$.parseJSON(e.child_files),$.parseJSON(e.folder));var t=$(".sidebar__content"),r=$(".content");t.empty(),r.empty();var l=!0,a=!1,d=void 0;try{for(var s,f=c.childFolders[Symbol.iterator]();!(l=(s=f.next()).done);l=!0){var p=s.value,u=i("template-folders",{name:p.fields.name,id:p.pk});t.append(u)}}catch(e){a=!0,d=e}finally{try{!l&&f.return&&f.return()}finally{if(a)throw d}}var v=!0,h=!1,g=void 0;try{for(var y,m=c.childFiles[Symbol.iterator]();!(v=(y=m.next()).done);v=!0){var b=y.value,x=b.fields.name;-1!==x.indexOf(".")&&(x=x.substring(0,x.indexOf(".")));var k=i("files",{name:x,link:"http://127.0.0.1:8000/media/"+b.fields.file,date:b.fields.date_creation});r.append(k)}}catch(e){h=!0,g=e}finally{try{!v&&m.return&&m.return()}finally{if(h)throw g}}null===c.parentFolderID?$(".backspace").css("display","none"):$(".backspace").length?$(".backspace").css("display","flex"):n(),history.pushState(null,null,"?folder='"+c.self.pk+"'")})}var o=r(2),c=void 0;e.exports={currentFolder:function(){return c},init:function(){var e=l("folder"),t=l("file");if(null===e){var r="http://127.0.0.1:8000/api/get-root";$.getJSON(r,function(e){c=new o(null,$.parseJSON(e.child_files),$.parseJSON(e.folder)),r="http://127.0.0.1:8000/api/get-folder/"+c.self.pk,n()}),a(r)}else null===t&&a("http://127.0.0.1:8000/api/get-folder/"+e.substr(1,e.length-2))},render:a}},function(e,t,r){"use strict";e.exports=function(){var e=r(0),t=r(3);$(document).ready(function(){e.init(),t.init()})}()},function(e,t,r){"use strict";e.exports=function(e,t,r){this.parentFolderID=r[0].fields.parent_folder,this.childFolders=e,this.childFiles=t,this.self=r[0]}},function(e,t,r){"use strict";var n=r(0).render,i=r(0).currentFolder;e.exports={init:function(){$(".sidebar").on("click",".folder",function(e){var t=e.currentTarget,r=$(t)[0].dataset.id;n("http://127.0.0.1:8000/api/get-folder/"+r)}),$(".sidebar").on("click",".backspace",function(){n("http://127.0.0.1:8000/api/get-folder/"+i().parentFolderID)}),$(".appendFolder").on("click",function(){var e=prompt("Укажите название папки");null!==e&&$.get({url:"http://127.0.0.1:8000/api/append-folder/",data:{name:e,parent_folder:i().self.pk},success:function(){n("http://127.0.0.1:8000/api/get-folder/"+i().self.pk)}})})}}}]);