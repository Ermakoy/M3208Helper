var helper=function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=1)}([function(e,n,t){"use strict";function r(){$(".sidebar").prepend("<div class='backspace'>\n            <div class='folderName'>Вернуться назад</div>\n        </div>")}function o(e,n){var t=document.getElementById(e).innerHTML;for(var r in n)if(n.hasOwnProperty(r)){var o=new RegExp("{"+r+"}","g");t=t.replace(o,n[r])}return t}function a(e,n){n||(n=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(n);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}function i(e){$.getJSON(e,function(e){s=new l(e.child_folders,e.files,{id:e.id,name:e.name,parentID:e.parent_folder});var n=$(".sidebar__content"),t=$(".content");n.empty(),t.empty();var a=!0,i=!1,c=void 0;try{for(var p,d=s.childFolders[Symbol.iterator]();!(a=(p=d.next()).done);a=!0){var f=p.value,u=o("template-folders",{name:f.name,id:f.id});n.append(u)}}catch(e){i=!0,c=e}finally{try{!a&&d.return&&d.return()}finally{if(i)throw c}}var v=!0,h=!1,y=void 0;try{for(var m,g=s.files[Symbol.iterator]();!(v=(m=g.next()).done);v=!0){var x=m.value,b=x.name;-1!==b.indexOf(".")&&(b=b.substring(0,b.indexOf(".")));var F=o("files",{name:b,link:"http://127.0.0.1:8000/media/"+x.file,date:x.date_creation});t.append(F)}}catch(e){h=!0,y=e}finally{try{!v&&g.return&&g.return()}finally{if(h)throw y}}null===s.parentFolderID?$(".backspace").css("display","none"):$(".backspace").length?$(".backspace").css("display","flex"):r(),$(".appendFiles__form").css("display","none"),$(".appendFiles").css("display","flex"),history.pushState(null,null,"?folder='"+s.self.id+"'")})}var l=t(2),s=void 0;e.exports={currentFolder:function(){return s},init:function(){var e=a("folder"),n=a("file");if(null===e){var t="http://127.0.0.1:8000/storage/api/root/";$.getJSON(t,function(e){s=new l(null,e.files,{id:e.id,name:e.name,parentID:e.parent_folder}),t="http://127.0.0.1:8000/storage/api/folder/"+s.self.id+"/",r()}),i(t)}else null===n&&i("http://127.0.0.1:8000/storage/api/folder/"+e.substr(1,e.length-2)+"/")},render:i}},function(e,n,t){"use strict";e.exports=function(){var e=t(0),n=t(3);$(document).ready(function(){e.init(),n.init()})}()},function(e,n,t){"use strict";e.exports=function(e,n,t){this.parentFolderID=t.parentID,this.childFolders=e,this.files=n,this.self=t}},function(e,n,t){"use strict";var r=t(0).render,o=t(0).currentFolder;e.exports={init:function(){$(".sidebar").on("click",".folder",function(e){var n=e.currentTarget,t=$(n)[0].dataset.id;r("http://127.0.0.1:8000/storage/api/folder/"+t+"/")}),$(".sidebar").on("click",".backspace",function(){r("http://127.0.0.1:8000/storage/api/folder/"+o().parentFolderID+"/")}),$(".appendFolder").on("click",function(){var e=prompt("Укажите название папки");""!==e&&null!==e&&$.post({url:"http://127.0.0.1:8000/storage/api/folder/create/",data:{name:e,parent_folder:o().self.pk},success:function(){r("http://127.0.0.1:8000/storage/api/folder/"+o().self.id+"/")}})}),$(".appendFiles").on("click",function(){$(".appendFiles").css("display","none"),$(".appendFiles__form").css("display","flex")}),$(".upload_files").on("click",function(e){var n=$(".files").files;if(e.stopPropagation(),e.preventDefault(),void 0!==n){var t=new FormData;$.each(n,function(e,n){t.append(e,n)}),t.append("folder",o().self.pk),$.ajax({url:"",type:"POST",data:t,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(e,n,t){void 0===e.error?console.log("Всё прошло нормально"):console.log("КОД КРАСНЫЙ КОД КРАСНЫЙ")},error:function(e,n,t){console.log("ОШИБКА AJAX запроса: "+n,e)}})}})}}}]);